<!DOCTYPE html>
<body>
    <meta charset="UTF-8" />
    <title>WikiHop</title>
    <link rel="stylesheet" href="css/style.css" />

    <div id="game-container">
        <aside id="sidebar">
            <h2 id="home-btn">WikiHop</h2>
            <p><strong id="click-counter-label">Clicks:</strong> <span id="click-counter">0</span></p>
            <p id="timer-display" class="hidden"><strong id="timer-label">Time:</strong> <span id="timer">0.00s</span></p>
            <p><strong id="start-page-label">Start:</strong> <span id="start-page">Loading...</span></p>
            <p><strong id="target-page-label">Target:</strong> <span id="target-page">Loading...</span></p>
        </aside>
        <div id="target-tooltip" class="tooltip hidden"></div>
        <main id="main-content">
            <header>
                <h1 id="page-title">Loading...</h1>
            </header>
            <div id="content"></div>
        </main>
    </div>

    <div id="start-modal">
        <div id="start-box">
            <h1 id="start-header">WikiHop</h1>
            <p>Choose your start and target pages</p>

            <form id="start-form">
                <div class="dropdowns-container">
                    <div class="dropdown-section">
                        <label for="wiki-lang">Wikipedia language</label>
                        <select id="wiki-lang">
                            <option value="en" selected>English</option>
                            <option value="fi">Finnish</option>
                            <option value="de">German</option>
                            <option value="sv">Swedish</option>
                        </select>
                    </div>
                    <div class="dropdown-section">
                        <label for="gamemode">Game Mode:</label>
                        <select id="gamemode">
                            <option value="set">Set Run</option>
                            <option value="random" selected>Random</option>
                            <option value="timed">Time Attack</option>
                        </select>
                    </div>
                </div>
                <div id="time-limit-section" class="time-limit-section hidden">
                    <div class="dropdowns-container">
                        <div class="dropdown-section">
                            <label for="time-limit-preset">Time Limit:</label>
                            <select id="time-limit-preset">
                                <option value="standard" selected>Standard (5 min)</option>
                                <option value="custom">Custom</option>
                            </select>
                        </div>
                        <div class="dropdown-section" id="custom-time-input-wrapper" style="display: none;">
                            <label for="custom-time-input">Minutes:</label>
                            <input type="number" id="custom-time-input" placeholder="5" min="1" max="60" value="5" />
                        </div>
                    </div>
                </div>
                <div class="page-input-section">
                    <label for="start-menu">Start Page:</label>
                    <input type="text" id="start-menu" placeholder="e.g., Finland" />
                </div>
                <div class="page-input-section">
                    <label for="target-menu">Target Page:</label>
                    <input type="text" id="target-menu" placeholder="e.g., Pakkala" />
                </div>

                <button type="submit" id="start-game-btn">Start Game</button>
            </form>

            <div class="button-container">
                <button id="create-party-btn">Create Party</button>
                <button id="join-party-btn">Join Party</button>
            </div>
            <div id="party-lobby-modal" class="hidden">
                <div class="party-lobby-content">
                    <div class="party-info">
                        <p><strong>Party Code:</strong></p>
                        <p class="party-code-display"><span id="party-code"></span></p>
                    </div>

                    <div class="party-gamemode">
                        <label for="party-gamemode">Game Mode:</label>
                        <select id="party-gamemode">
                            <option value="teamwork">Teamwork</option>
                            <option value="competition">Competition</option>
                        </select>
                    </div>

                    <div class="party-buttons">
                        <!-- Buttons added dynamically by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="win-modal" class="hidden">
        <div id="win-box">
            <h2 id="win-title">You reached the target!</h2>
            <p>Clicks: <span id="final-clicks">0</span></p>
            <p>Time: <span id="final-time">0</span></p>
            <button id="new-round-btn">Start New Round</button>
        </div>
    </div>

    <!-- Firebase -->
    <script type="module" src="js/firestore.js"></script>

    <!-- Javascript -->
    <script type="module" src="js/multiplayer.js"></script>
    <script src="js/api.js"></script>
    <script type="module" src="js/ui.js"></script>
    <script type="module" src="js/game.js"></script>
    <script src="js/langs.js"></script>
</body>